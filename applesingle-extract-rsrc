#!/usr/bin/poke -L
!#

load "applesingle.pk";

var filename = argv[0];
var output = filename + ".rsrc";

printf "extracting resource fork to `%s'...\n", output;

var file = open(filename, IOS_M_RDONLY);

var header = AppleSingleHeader @ file : 0#B;

var rsrc = header.get_entry(AS_RSRC);

save :from rsrc._offset :size rsrc._len#B :file output;

printf "done\n";

// vim: ft=poke :
